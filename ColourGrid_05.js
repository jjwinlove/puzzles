(function (cjs, an) {

var p; // shortcut to reference prototypes
var lib={};var ss={};var img={};
lib.ssMetadata = [
		{name:"ColourGrid_05_atlas_1", frames: [[1368,691,262,16],[410,546,272,544],[1638,0,408,408],[684,546,408,272],[684,820,272,272],[1094,546,272,408],[1638,410,408,408],[0,546,408,408],[0,0,544,544],[1368,820,272,272],[1368,709,253,16],[1368,727,93,25],[546,0,544,544],[1092,0,544,544],[1368,546,238,143],[1642,820,238,143],[0,1092,543,89],[0,956,329,64]]}
];


(lib.AnMovieClip = function(){
	this.actionFrames = [];
	this.ignorePause = false;
	this.gotoAndPlay = function(positionOrLabel){
		cjs.MovieClip.prototype.gotoAndPlay.call(this,positionOrLabel);
	}
	this.play = function(){
		cjs.MovieClip.prototype.play.call(this);
	}
	this.gotoAndStop = function(positionOrLabel){
		cjs.MovieClip.prototype.gotoAndStop.call(this,positionOrLabel);
	}
	this.stop = function(){
		cjs.MovieClip.prototype.stop.call(this);
	}
}).prototype = p = new cjs.MovieClip();
// symbols:



(lib.CachedBmp_19 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(0);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_10 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(1);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_9 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(2);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_8 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(3);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_7 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(4);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_14 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(5);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_28 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(6);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_27 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(7);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_26 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(8);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_25 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(9);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_18 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(10);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_24 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(11);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_3 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(12);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_12 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(13);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_22 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(14);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_13 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(15);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_16 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(16);
}).prototype = p = new cjs.Sprite();



(lib.CachedBmp_21 = function() {
	this.initialize(ss["ColourGrid_05_atlas_1"]);
	this.gotoAndStop(17);
}).prototype = p = new cjs.Sprite();
// helper functions:

function mc_symbol_clone() {
	var clone = this._cloneProps(new this.constructor(this.mode, this.startPosition, this.loop, this.reversed));
	clone.gotoAndStop(this.currentFrame);
	clone.paused = this.paused;
	clone.framerate = this.framerate;
	return clone;
}

function getMCSymbolPrototype(symbol, nominalBounds, frameBounds) {
	var prototype = cjs.extend(symbol, cjs.MovieClip);
	prototype.clone = mc_symbol_clone;
	prototype.nominalBounds = nominalBounds;
	prototype.frameBounds = frameBounds;
	return prototype;
	}


(lib.TestClicksRemaining = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_19();
	this.instance.setTransform(0,0,0.4235,0.4235);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.TestClicksRemaining, new cjs.Rectangle(0,0,111,6.8), null);


(lib.Shape_5 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_10();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,136,272);


(lib.Shape_4 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_9();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,204,204);


(lib.Shape_3 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_8();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,204,136);


(lib.Shape_2 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// _
	this.instance = new lib.CachedBmp_14();
	this.instance.setTransform(0,-68,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Layer_1
	this.instance_1 = new lib.CachedBmp_7();
	this.instance_1.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,-68,136,204);


(lib.Shape_1_Shape_4 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_28();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.Shape_1_Shape_4, new cjs.Rectangle(0,0,204,204), null);


(lib.Shape_1_Shape_3 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_27();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.Shape_1_Shape_3, new cjs.Rectangle(0,0,204,204), null);


(lib.Shape_1_Shape_2 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_26();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.Shape_1_Shape_2, new cjs.Rectangle(0,0,272,272), null);


(lib.Shape_1_Shape_1 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_25();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.Shape_1_Shape_1, new cjs.Rectangle(0,0,136,136), null);


(lib.MistakesRemaining = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.instance = new lib.CachedBmp_18();
	this.instance.setTransform(0,0,0.4235,0.4235);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.MistakesRemaining, new cjs.Rectangle(0,0,107.2,6.8), null);


(lib.InnerDot = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("#525252").s().p("AgUAVQgJgIAAgNQAAgMAJgIQAJgJALAAQANAAAIAJQAJAIAAAMQAAAMgJAJQgIAJgNAAQgLAAgJgJg");
	this.shape.setTransform(3.025,3.025);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.InnerDot, new cjs.Rectangle(0,0,6.1,6.1), null);


(lib.Base = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Layer_2
	this.instance = new lib.CachedBmp_12();
	this.instance.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	// Layer_1
	this.instance_1 = new lib.CachedBmp_3();
	this.instance_1.setTransform(0,0,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(1));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,272,272);


(lib.Shape_1 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.stop();
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// Layer_1
	this.shape_1_shape_4 = new lib.Shape_1_Shape_4();
	this.shape_1_shape_4.name = "shape_1_shape_4";
	this.shape_1_shape_4.setTransform(170.05,170.05,1,1,0,0,0,102,102);

	this.timeline.addTween(cjs.Tween.get(this.shape_1_shape_4).wait(1));

	// Layer_4
	this.shape_1_shape_3 = new lib.Shape_1_Shape_3();
	this.shape_1_shape_3.name = "shape_1_shape_3";
	this.shape_1_shape_3.setTransform(170,170.05,1,1,0,0,0,102,102);

	this.timeline.addTween(cjs.Tween.get(this.shape_1_shape_3).wait(1));

	// Layer_3
	this.shape_1_shape_2 = new lib.Shape_1_Shape_2();
	this.shape_1_shape_2.name = "shape_1_shape_2";
	this.shape_1_shape_2.setTransform(136,136.1,1,1,0,0,0,136,136.1);

	this.timeline.addTween(cjs.Tween.get(this.shape_1_shape_2).wait(1));

	// Layer_2
	this.shape_1_shape_1 = new lib.Shape_1_Shape_1();
	this.shape_1_shape_1.name = "shape_1_shape_1";
	this.shape_1_shape_1.setTransform(68,68,1,1,0,0,0,68,68);

	this.timeline.addTween(cjs.Tween.get(this.shape_1_shape_1).wait(1));

	this._renderFirstFrame();

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,272.1,272.1);


(lib.Grid_4x4 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.isSingleFrame = false;
	// timeline functions:
	this.frame_0 = function() {
		if(this.isSingleFrame) {
			return;
		}
		if(this.totalFrames == 1) {
			this.isSingleFrame = true;
		}
		this.stop();
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// shape_5
	this.shape_1 = new lib.Shape_1();
	this.shape_1.name = "shape_1";
	this.shape_1.setTransform(68,68,1,1,0,0,0,68,68);

	this.shape_2 = new lib.Shape_2();
	this.shape_2.name = "shape_2";
	this.shape_2.setTransform(136.05,204.05,1,1,0,0,0,68,68);

	this.shape_3 = new lib.Shape_3();
	this.shape_3.name = "shape_3";
	this.shape_3.setTransform(102,204.05,1,1,0,0,0,102,68);

	this.shape_4 = new lib.Shape_4();
	this.shape_4.name = "shape_4";
	this.shape_4.setTransform(170,102,1,1,0,0,0,102,102);

	this.shape_5 = new lib.Shape_5();
	this.shape_5.name = "shape_5";
	this.shape_5.setTransform(204.05,136.1,1,1,0,0,0,68,136.1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_5},{t:this.shape_4},{t:this.shape_3},{t:this.shape_2},{t:this.shape_1}]}).wait(1));

	// Base
	this.instance = new lib.Base();
	this.instance.setTransform(136.1,136.1,1,1,0,0,0,136.1,136.1);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.Grid_4x4, new cjs.Rectangle(0,0,272.1,272.1), null);


(lib.Dots = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	// Dots
	this.innerDot_3 = new lib.InnerDot();
	this.innerDot_3.name = "innerDot_3";
	this.innerDot_3.setTransform(34.15,4.45,1.4876,1.4876,0,0,0,3,3);

	this.innerDot_2 = new lib.InnerDot();
	this.innerDot_2.name = "innerDot_2";
	this.innerDot_2.setTransform(19.5,4.6,1.4876,1.4876,0,0,0,3.1,3.1);

	this.innerDot_1 = new lib.InnerDot();
	this.innerDot_1.name = "innerDot_1";
	this.innerDot_1.setTransform(4.6,4.6,1.4876,1.4876,0,0,0,3.1,3.1);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.innerDot_1},{t:this.innerDot_2},{t:this.innerDot_3}]}).wait(1));

	// Rings
	this.instance = new lib.CachedBmp_24();
	this.instance.setTransform(-0.4,-0.9,0.4235,0.4235);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(1));

	this._renderFirstFrame();

}).prototype = getMCSymbolPrototype(lib.Dots, new cjs.Rectangle(-0.4,-0.9,39.4,10.6), null);


// stage content:
(lib.ColourGrid_05 = function(mode,startPosition,loop,reversed) {
if (loop == null) { loop = true; }
if (reversed == null) { reversed = false; }
	var props = new Object();
	props.mode = mode;
	props.startPosition = startPosition;
	props.labels = {Start:1,YouWin:9,YouLose:14};
	props.loop = loop;
	props.reversed = reversed;
	cjs.MovieClip.apply(this,[props]);

	this.actionFrames = [0,1,2];
	// timeline functions:
	this.frame_0 = function() {
		this.testTaps = 0;
		this.mistakeTaps = 0;
		this.currentStage = 1;
		this.gameOn = false;
		
		this.resetText = function() {
			this.mistakesRemaining.visible = false;
			this.testClicksRemaining.visible = true;
		};
		
		this.clearDots = function() {
			for (let x = 1; x <= 3; x++) {
				this.dots["innerDot_" + x].visible = false;
			}
		};
		
		this.resetShapeOrder = function() {
			//console.log("this.shapeOrder[0] = ", this.shapeOrder[0]);
			let y = 5;
			for (let x = 1; x <= 5; x++) {
				this.grid_4x4["shape_" + this.shapeOrder[x - 1]].parent.setChildIndex(this.grid_4x4["shape_" + this.shapeOrder[x - 1]], y--);
				this.grid_4x4["shape_" + this.shapeOrder[x - 1]].visible = true;
			}
		};
		
		this.randomShapes = function() {
			// var randomShape = Math.floor(Math.random() * 4) + 1;
			var randomShape = 1;
			//for (let shapeNum = 1; shapeNum <= 5; shapeNum++) { 
				var shapeNum = 1;
				for (let shapeShapeNum = 1; shapeShapeNum <= 4; shapeShapeNum++) {
				//var shapeShapeNum = 1;
				//var randomShape = 2;
					if (shapeShapeNum != randomShape) {
						this.grid_4x4["shape_" + shapeNum]["shape_" + shapeNum + "_shape_" + shapeShapeNum].visible = false;
					} else {
						this.grid_4x4["shape_" + shapeNum]["shape_" + shapeNum + "_shape_" + shapeShapeNum].visible = true;
					}
				//console.log("shape_1_shape_1.visible = ", this.grid_4x4["shape_" + shapeNum]["shape_" + shapeNum + "_shape_" + shapeShapeNum].visible);
				}
			//}
		};
		
		this.generateRandomArray = function() {
		    var numbers = [1, 2, 3, 4, 5]; // Create the array 
			//return numbers;
		    var shuffled = []; // Empty array for shuffled numbers
		    while (numbers.length > 0) {
		        var randomIndex = Math.floor(Math.random() * numbers.length); // Get random index
		        shuffled.push(numbers.splice(randomIndex, 1)[0]); // Remove number from original array and add to shuffled array
		    }
		    
		    return shuffled;
		};
		
		this.onTapFunction = function(shapeNum) {
			//console.log("onTapFunction called with shapeNum = ", shapeNum);
			//console.log("TEST currentStage = ", this.currentStage);
			if (this.gameOn) {
				//console.log("Game on");
				for (let x = 1; x <= 5; x++) {
					//console.log("TEST array[", [x - 1], "] = ", this.shapeOrder[x - 1]);
					if (this.shapeOrder[x - 1] == shapeNum && this.currentStage == x) {
						this.currentStage++;
						console.log("shapeNum = ", shapeNum);
						this.grid_4x4["shape_" + shapeNum].visible = false;
						if (this.shapeOrder[this.shapeOrder.length - 1] === shapeNum) {
							this.gotoAndStop("YouWin");
							return;
						} else {
							return;
						}
					} 
				}
			}
			this.currentStage = 1;
			this.grid_4x4["shape_" + shapeNum].parent.setChildIndex(this.grid_4x4["shape_" + shapeNum], this.grid_4x4["shape_" + shapeNum].parent.numChildren - 1);
			createjs.Tween.get(this.grid_4x4["shape_" + shapeNum])
		    .to({ scaleX: this.grid_4x4["shape_" + shapeNum].scaleX * 1.02, scaleY: this.grid_4x4["shape_" + shapeNum].scaleY * 1.02 }, 100, createjs.Ease.quadOut);
			//console.log("testTaps = ", this.testTaps);
			if (!this.gameOn) {
				//console.log("innerDot_", ++this.testTaps);
				this.dots["innerDot_" + ++this.testTaps].visible = true;
			} else {
				this.dots["innerDot_" + ++this.mistakeTaps].visible = true;
			}
			setTimeout(() => {
				//console.log("After 1 second");
				createjs.Tween.get(this.grid_4x4["shape_" + shapeNum])
		    .to({ scaleX: 1, scaleY: 1 }, 100, createjs.Ease.quadOut);
				this.resetShapeOrder();
				if (this.testTaps == 3) { // if we finish the test tap stage
					this.gameOn = true;
					this.testTaps++; // set this.testTaps to 4 so it doesn't wipe dots next time
					this.testClicksRemaining.visible = false;
					this.mistakesRemaining.visible = true;
					this.clearDots();
				} else if (this.mistakeTaps > 2) {  // if we make the third mistake
					this.gotoAndStop("YouLose");
				}
			}, 1000);
		};
		
		this.resetText();
		this.clearDots();
		this.shapeOrder = this.generateRandomArray(); // Generate the array and store it in `this`
		this.randomShapes();
		//this.resetShapeOrder(); //doesn't work on this frame
	}
	this.frame_1 = function() {
		this.resetShapeOrder();
	}
	this.frame_2 = function() {
		//console.log("TEST currentStage = ", this.currentStage);
		
		this.stop();
		
		this.grid_4x4.shape_1.addEventListener("click", (event) => {
			this.onTapFunction(1);
		/*	
			console.log("TEST currentStage = ", this.currentStage);
			var correctTap = false;
			for (let x = 1; x <= 5; x++) {
				console.log("TEST array[", [x - 1], "] = ", this.shapeOrder[x - 1]);
				if (this.shapeOrder[x - 1] == 1 && this.currentStage == x && this.testTaps > 3) {
					this.currentStage++;
					this.grid_4x4.shape_1.visible = false;
					correctTap = true;
					break;
				} 
			}
			if (!correctTap) {
				console.log("Clicked on 1 before its time");
				this.currentStage = 1;
				event.currentTarget.parent.setChildIndex(event.currentTarget, event.currentTarget.parent.numChildren - 1);
				createjs.Tween.get(this.grid_4x4.shape_1)
		    .to({ scaleX: this.grid_4x4.shape_1.scaleX * 1.02, scaleY: this.grid_4x4.shape_1.scaleY * 1.02 }, 100, createjs.Ease.quadOut);
				console.log("testTaps = ", this.testTaps);
				if (this.testTaps < 3) {
					//console.log("innerDot_", ++this.testTaps);
					this.dots["innerDot_" + ++this.testTaps].visible = true;
				} else {
					this.dots["innerDot_" + ++this.mistakeTaps].visible = true;
				}
				setTimeout(() => {
					console.log("After 1 second");
					createjs.Tween.get(this.grid_4x4.shape_1)
		    .to({ scaleX: 1, scaleY: 1 }, 100, createjs.Ease.quadOut);
					this.resetShapeOrder();
					if (this.testTaps == 3) { // if we finish the test tap stage
						this.testTaps++; // set this.testTaps to 4 so it doesn't wipe dots next time
						this.testClicksRemaining.visible = false;
						this.mistakesRemaining.visible = true;
						this.clearDots();
					} else if (this.mistakeTaps > 2) {  // if we make the third mistake
						this.gotoAndStop("YouLose");
					}
				}, 1000);
			}
		*/
		});
		
		this.grid_4x4.shape_2.addEventListener("click", (event) => {
			this.onTapFunction(2);
		/*	console.log("TEST currentStage = ", this.currentStage);
			var correctTap = false;
			for (let x = 1; x <= 5; x++) {
				console.log("TEST array[", [x - 1], "] = ", this.shapeOrder[x - 1]);
				if (this.shapeOrder[x - 1] == 5 && this.currentStage == x && this.testTaps > 3) {
					this.currentStage++;
					this.grid_4x4.shape_2.visible = false;
					correctTap = true;
					break;
					//return;
				} 
			}
			if (!correctTap) {
				console.log("Clicked on 2 before its time");
				this.currentStage = 1;
				event.currentTarget.parent.setChildIndex(event.currentTarget, event.currentTarget.parent.numChildren - 1);
				createjs.Tween.get(this.grid_4x4.shape_2)
		    .to({ scaleX: this.grid_4x4.shape_2.scaleX * 1.02, scaleY: this.grid_4x4.shape_2.scaleY * 1.02 }, 100, createjs.Ease.quadOut);
				console.log("testTaps = ", this.testTaps);
				if (this.testTaps < 3) {
					//console.log("innerDot_", ++this.testTaps);
					this.dots["innerDot_" + ++this.testTaps].visible = true;
				} else {
					this.dots["innerDot_" + ++this.mistakeTaps].visible = true;
				}
				setTimeout(() => {
					console.log("After 1 second");
					createjs.Tween.get(this.grid_4x4.shape_2)
		    .to({ scaleX: 1, scaleY: 1 }, 100, createjs.Ease.quadOut);
					this.resetShapeOrder();
					if (this.testTaps == 3) { // if we finish the test tap stage
						this.testTaps++; // set this.testTaps to 4 so it doesn't wipe dots next time
						this.testClicksRemaining.visible = false;
						this.mistakesRemaining.visible = true;
						this.clearDots();
					} else if (this.mistakeTaps > 2) {  // if we make the third mistake
						this.gotoAndStop("YouLose");
					}
				}, 1000);
			}
			*/
		});
		
		this.grid_4x4.shape_3.addEventListener("click", (event) => {
			this.onTapFunction(3);
		/*	console.log("TEST currentStage = ", this.currentStage);
			var correctTap = false;
			for (let x = 1; x <= 5; x++) {
				console.log("TEST array[", [x - 1], "] = ", this.shapeOrder[x - 1]);
				if (this.shapeOrder[x - 1] == 3 && this.currentStage == x && this.testTaps > 3) {
					this.currentStage++;
					this.grid_4x4.shape_3.visible = false;
					correctTap = true;
					break;
					//return;
				} 
			}
			if (!correctTap) {
				console.log("Clicked on 2 before its time");
				this.currentStage = 1;
				event.currentTarget.parent.setChildIndex(event.currentTarget, event.currentTarget.parent.numChildren - 1);
				createjs.Tween.get(this.grid_4x4.shape_3)
		    .to({ scaleX: this.grid_4x4.shape_3.scaleX * 1.02, scaleY: this.grid_4x4.shape_3.scaleY * 1.02 }, 100, createjs.Ease.quadOut);
				console.log("testTaps = ", this.testTaps);
				if (this.testTaps < 3) {
					//console.log("innerDot_", ++this.testTaps);
					this.dots["innerDot_" + ++this.testTaps].visible = true;
				} else {
					this.dots["innerDot_" + ++this.mistakeTaps].visible = true;
				}
				setTimeout(() => {
					console.log("After 1 second");
					createjs.Tween.get(this.grid_4x4.shape_3)
		    .to({ scaleX: 1, scaleY: 1 }, 100, createjs.Ease.quadOut);
					this.resetShapeOrder();
					if (this.testTaps == 3) { // if we finish the test tap stage
						this.testTaps++; // set this.testTaps to 4 so it doesn't wipe dots next time
						this.testClicksRemaining.visible = false;
						this.mistakesRemaining.visible = true;
						this.clearDots();
					} else if (this.mistakeTaps > 2) {  // if we make the third mistake
						this.gotoAndStop("YouLose");
					}
				}, 1000);
			}
			*/
		});
		
		this.grid_4x4.shape_4.addEventListener("click", (event) => {
			this.onTapFunction(4);
		/*	console.log("TEST currentStage = ", this.currentStage);
			var correctTap = false;
			for (let x = 1; x <= 5; x++) {
				console.log("TEST array[", [x - 1], "] = ", this.shapeOrder[x - 1]);
				if (this.shapeOrder[x - 1] == 4 && this.currentStage == x && this.testTaps > 3) {
					this.currentStage++;
					this.grid_4x4.shape_4.visible = false;
					correctTap = true;
					break;
					//return;
				} 
			}
			if (!correctTap) {
				console.log("Clicked on 2 before its time");
				this.currentStage = 1;
				event.currentTarget.parent.setChildIndex(event.currentTarget, event.currentTarget.parent.numChildren - 1);
				createjs.Tween.get(this.grid_4x4.shape_4)
		    .to({ scaleX: this.grid_4x4.shape_4.scaleX * 1.02, scaleY: this.grid_4x4.shape_4.scaleY * 1.02 }, 100, createjs.Ease.quadOut);
				console.log("testTaps = ", this.testTaps);
				if (this.testTaps < 3) {
					//console.log("innerDot_", ++this.testTaps);
					this.dots["innerDot_" + ++this.testTaps].visible = true;
				} else {
					this.dots["innerDot_" + ++this.mistakeTaps].visible = true;
				}
				setTimeout(() => {
					console.log("After 1 second");
					createjs.Tween.get(this.grid_4x4.shape_4)
		    .to({ scaleX: 1, scaleY: 1 }, 100, createjs.Ease.quadOut);
					this.resetShapeOrder();
					if (this.testTaps == 3) { // if we finish the test tap stage
						this.testTaps++; // set this.testTaps to 4 so it doesn't wipe dots next time
						this.testClicksRemaining.visible = false;
						this.mistakesRemaining.visible = true;
						this.clearDots();
					} else if (this.mistakeTaps > 2) {  // if we make the third mistake
						this.gotoAndStop("YouLose");
					}
				}, 1000);
			}
			*/
		});
		
		this.grid_4x4.shape_5.addEventListener("click", (event) => {
			this.onTapFunction(5);
		/*	console.log("TEST currentStage = ", this.currentStage);
			var correctTap = false;
			for (let x = 1; x <= 5; x++) {
				console.log("TEST array[", [x - 1], "] = ", this.shapeOrder[x - 1]);
				if (this.shapeOrder[x - 1] == 2 && this.currentStage == x && this.testTaps > 3) {
					this.currentStage++;
					this.grid_4x4.shape_5.visible = false;
					correctTap = true;
					break;
					//return;
				} 
			}
			if (!correctTap) {
				console.log("Clicked on 2 before its time");
				this.currentStage = 1;
				event.currentTarget.parent.setChildIndex(event.currentTarget, event.currentTarget.parent.numChildren - 1);
				createjs.Tween.get(this.grid_4x4.shape_5)
		    .to({ scaleX: this.grid_4x4.shape_5.scaleX * 1.02, scaleY: this.grid_4x4.shape_5.scaleY * 1.02 }, 100, createjs.Ease.quadOut);
				console.log("testTaps = ", this.testTaps);
				if (this.testTaps < 3) {
					//console.log("innerDot_", ++this.testTaps);
					this.dots["innerDot_" + ++this.testTaps].visible = true;
				} else {
					this.dots["innerDot_" + ++this.mistakeTaps].visible = true;
				}
				setTimeout(() => {
					console.log("After 1 second");
					createjs.Tween.get(this.grid_4x4.shape_5)
		    .to({ scaleX: 1, scaleY: 1 }, 100, createjs.Ease.quadOut);
					this.resetShapeOrder();
					if (this.testTaps == 3) { // if we finish the test tap stage
						this.testTaps++; // set this.testTaps to 4 so it doesn't wipe dots next time
						this.testClicksRemaining.visible = false;
						this.mistakesRemaining.visible = true;
						this.clearDots();
					} else if (this.mistakeTaps > 2) {  // if we make the third mistake
						this.gotoAndStop("YouLose");
					}
				}, 1000);
			}
			*/
		});
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1).call(this.frame_1).wait(1).call(this.frame_2).wait(17));

	// Title
	this.instance = new lib.CachedBmp_21();
	this.instance.setTransform(118.35,56.75,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance).wait(19));

	// Underline
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("#231F20").ss(1.2).p("AsLAAIYXAA");
	this.shape.setTransform(199.9,90.1);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(19));

	// Instructions
	this.instance_1 = new lib.CachedBmp_16();
	this.instance_1.setTransform(64.9,458.4,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).wait(19));

	// Test_clicks_remaining
	this.testClicksRemaining = new lib.TestClicksRemaining();
	this.testClicksRemaining.name = "testClicksRemaining";
	this.testClicksRemaining.setTransform(177.5,431.25,1.1807,1.1807,0,0,0,55.5,3.5);

	this.timeline.addTween(cjs.Tween.get(this.testClicksRemaining).wait(19));

	// Mistakes_remaining
	this.mistakesRemaining = new lib.MistakesRemaining();
	this.mistakesRemaining.name = "mistakesRemaining";
	this.mistakesRemaining.setTransform(179.8,431.3,1.1807,1.1807,0,0,0,53.6,3.5);

	this.timeline.addTween(cjs.Tween.get(this.mistakesRemaining).wait(19));

	// Dots
	this.dots = new lib.Dots();
	this.dots.name = "dots";
	this.dots.setTransform(275.35,430.4,1.1807,1.1807,0,0,0,19.4,4.3);

	this.timeline.addTween(cjs.Tween.get(this.dots).wait(19));

	// Grid
	this.grid_4x4 = new lib.Grid_4x4();
	this.grid_4x4.name = "grid_4x4";
	this.grid_4x4.setTransform(200.75,260.05,1,1,0,0,0,136.1,136.1);

	this.timeline.addTween(cjs.Tween.get(this.grid_4x4).to({_off:true},9).wait(10));

	// Win_Lose
	this.instance_2 = new lib.CachedBmp_13();
	this.instance_2.setTransform(140.5,218.3,0.5,0.5);

	this.instance_3 = new lib.CachedBmp_22();
	this.instance_3.setTransform(141,218.35,0.5,0.5);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[]}).to({state:[{t:this.instance_2}]},9).to({state:[{t:this.instance_3}]},5).wait(5));

	this._renderFirstFrame();

}).prototype = p = new lib.AnMovieClip();
p.nominalBounds = new cjs.Rectangle(264.7,331.8,72,171.09999999999997);
// library properties:
lib.properties = {
	id: 'F9E2F03B988949F3BBD507917F055C6F',
	width: 400,
	height: 550,
	fps: 30,
	color: "#FFFFFF",
	opacity: 1.00,
	manifest: [
		{src:"images/ColourGrid_05_atlas_1.png", id:"ColourGrid_05_atlas_1"}
	],
	preloads: []
};



// bootstrap callback support:

(lib.Stage = function(canvas) {
	createjs.Stage.call(this, canvas);
}).prototype = p = new createjs.Stage();

p.setAutoPlay = function(autoPlay) {
	this.tickEnabled = autoPlay;
}
p.play = function() { this.tickEnabled = true; this.getChildAt(0).gotoAndPlay(this.getTimelinePosition()) }
p.stop = function(ms) { if(ms) this.seek(ms); this.tickEnabled = false; }
p.seek = function(ms) { this.tickEnabled = true; this.getChildAt(0).gotoAndStop(lib.properties.fps * ms / 1000); }
p.getDuration = function() { return this.getChildAt(0).totalFrames / lib.properties.fps * 1000; }

p.getTimelinePosition = function() { return this.getChildAt(0).currentFrame / lib.properties.fps * 1000; }

an.bootcompsLoaded = an.bootcompsLoaded || [];
if(!an.bootstrapListeners) {
	an.bootstrapListeners=[];
}

an.bootstrapCallback=function(fnCallback) {
	an.bootstrapListeners.push(fnCallback);
	if(an.bootcompsLoaded.length > 0) {
		for(var i=0; i<an.bootcompsLoaded.length; ++i) {
			fnCallback(an.bootcompsLoaded[i]);
		}
	}
};

an.compositions = an.compositions || {};
an.compositions['F9E2F03B988949F3BBD507917F055C6F'] = {
	getStage: function() { return exportRoot.stage; },
	getLibrary: function() { return lib; },
	getSpriteSheet: function() { return ss; },
	getImages: function() { return img; }
};

an.compositionLoaded = function(id) {
	an.bootcompsLoaded.push(id);
	for(var j=0; j<an.bootstrapListeners.length; j++) {
		an.bootstrapListeners[j](id);
	}
}

an.getComposition = function(id) {
	return an.compositions[id];
}


an.makeResponsive = function(isResp, respDim, isScale, scaleType, domContainers) {		
	var lastW, lastH, lastS=1;		
	window.addEventListener('resize', resizeCanvas);		
	resizeCanvas();		
	function resizeCanvas() {			
		var w = lib.properties.width, h = lib.properties.height;			
		var iw = window.innerWidth, ih=window.innerHeight;			
		var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
		if(isResp) {                
			if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
				sRatio = lastS;                
			}				
			else if(!isScale) {					
				if(iw<w || ih<h)						
					sRatio = Math.min(xRatio, yRatio);				
			}				
			else if(scaleType==1) {					
				sRatio = Math.min(xRatio, yRatio);				
			}				
			else if(scaleType==2) {					
				sRatio = Math.max(xRatio, yRatio);				
			}			
		}
		domContainers[0].width = w * pRatio * sRatio;			
		domContainers[0].height = h * pRatio * sRatio;
		domContainers.forEach(function(container) {				
			container.style.width = w * sRatio + 'px';				
			container.style.height = h * sRatio + 'px';			
		});
		stage.scaleX = pRatio*sRatio;			
		stage.scaleY = pRatio*sRatio;
		lastW = iw; lastH = ih; lastS = sRatio;            
		stage.tickOnUpdate = false;            
		stage.update();            
		stage.tickOnUpdate = true;		
	}
}
an.handleSoundStreamOnTick = function(event) {
	if(!event.paused){
		var stageChild = stage.getChildAt(0);
		if(!stageChild.paused || stageChild.ignorePause){
			stageChild.syncStreamSounds();
		}
	}
}
an.handleFilterCache = function(event) {
	if(!event.paused){
		var target = event.target;
		if(target){
			if(target.filterCacheList){
				for(var index = 0; index < target.filterCacheList.length ; index++){
					var cacheInst = target.filterCacheList[index];
					if((cacheInst.startFrame <= target.currentFrame) && (target.currentFrame <= cacheInst.endFrame)){
						cacheInst.instance.cache(cacheInst.x, cacheInst.y, cacheInst.w, cacheInst.h);
					}
				}
			}
		}
	}
}


})(createjs = createjs||{}, AdobeAn = AdobeAn||{});
var createjs, AdobeAn;